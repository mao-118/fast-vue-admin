import{r as e,b as a,aa as s,E as l,c as t,d as o,e as r,a3 as c,g as n,al as u,f as d,w as i,av as p,aw as m,ad as f,aY as x,j as v,o as g,k as b}from"./index-b2c55ba7.js";import{E as j}from"./el-divider-7dadf054.js";import{E as w,a as _}from"./el-form-item-05122efa.js";import{E as k}from"./el-col-0f6a6de6.js";import"./castArray-fdcec759.js";const h={class:"app-container"},y=v(" 连接状态： "),E=v("发送"),V=v("聊天记录"),q={class:"msg-box"},A={class:"msg-content"},C={class:"msg-text"},R={setup(v){const R=e([]),S=a(null),U=e({text:""}),W=e({text:[{required:!0,message:"输入的内容不能为空",trigger:"blur"}]}),Y=()=>{S.value.validate((e=>{e?(G(U.text),b.success("发送成功")):console.log(e)}))};let z=null;const B=a(0),D=e([{color:"text-purple-500",text:"建立连接中..."},{color:"text-green-500",text:"连接成功"},{color:"text-red-500",text:"连接失败"},{color:"text-purple-500",text:"连接关闭"}]),F=e=>{B.value=1},G=e=>{z.send(e),R.push(e)},H=e=>{R.push(e.data)},I=e=>{B.value=2,console.log("error",e),b.error("连接异常，请尝试刷新页面")},J=e=>{B.value=3,console.log("close",e)};return z=new WebSocket("wss://javascript.info/article/websocket/chat/ws"),z.onopen=F,z.onmessage=H,z.onerror=I,z.onclose=J,s((()=>{z.close()})),(e,a)=>{const s=l,v=k,b=w,z=t,F=_,G=j;return g(),o("div",h,[r("div",null,[y,r("span",{class:c(n(D)[B.value].color)},u(n(D)[B.value].text),3)]),d(F,{ref_key:"formRef",ref:S,model:n(U),rules:n(W),"label-width":"80px"},{default:i((()=>[d(b,{label:"输入内容",prop:"text"},{default:i((()=>[d(v,{span:5},{default:i((()=>[d(s,{modelValue:n(U).text,"onUpdate:modelValue":a[0]||(a[0]=e=>n(U).text=e)},null,8,["modelValue"])])),_:1})])),_:1}),d(b,null,{default:i((()=>[d(z,{type:"primary",onClick:Y},{default:i((()=>[E])),_:1})])),_:1})])),_:1},8,["model","rules"]),d(G,null,{default:i((()=>[V])),_:1}),p(r("div",q,[(g(!0),o(f,null,x(n(R),((e,a)=>(g(),o("div",{key:a,class:c([{pt:a%2==0},"msg-item"])},[r("div",A,[r("div",C,u(e),1)])],2)))),128))],512),[[m,n(R).length]])])}}};export{R as default};
