import{r as e,b as t,q as l,c as s,d as a,N as o,f as r,t as u,e as n,w as c,y as d,L as i,H as p,I as m,m as x,i as f,o as v,E as g}from"./index-ba935302.js";const b={class:"app-container"},_=x(" 连接状态： "),w=x("发送"),h=x("聊天记录"),k={class:"msg-box"},y={class:"msg-content"},V={class:"msg-text"},j={setup(x){const j=e([]),q=t(null),C=e({text:""}),E=e({text:[{required:!0,message:"输入的内容不能为空",trigger:"blur"}]}),H=()=>{q.value.validate((e=>{e&&(S(C.text),g.success("发送成功"))}))};let I=null;const L=t(0),N=e([{color:"text-purple-500",text:"建立连接中..."},{color:"text-green-500",text:"连接成功"},{color:"text-red-500",text:"连接失败"},{color:"text-purple-500",text:"连接关闭"}]),R=e=>{L.value=1},S=e=>{I.send(e),j.push(e)},U=e=>{j.push(e.data)},W=e=>{L.value=2,g.error("连接异常，请尝试刷新页面")},z=e=>{L.value=3};return I=new WebSocket("wss://javascript.info/article/websocket/chat/ws"),I.onopen=R,I.onmessage=U,I.onerror=W,I.onclose=z,l((()=>{I.close()})),(e,t)=>{const l=f("el-input"),x=f("el-col"),g=f("el-form-item"),I=f("el-button"),R=f("el-form"),S=f("el-divider");return v(),s("div",b,[a("div",null,[_,a("span",{class:o(r(N)[L.value].color)},u(r(N)[L.value].text),3)]),n(R,{ref_key:"formRef",ref:q,model:r(C),rules:r(E),"label-width":"80px"},{default:c((()=>[n(g,{label:"输入内容",prop:"text"},{default:c((()=>[n(x,{span:5},{default:c((()=>[n(l,{modelValue:r(C).text,"onUpdate:modelValue":t[0]||(t[0]=e=>r(C).text=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(g,null,{default:c((()=>[n(I,{type:"primary",onClick:H},{default:c((()=>[w])),_:1})])),_:1})])),_:1},8,["model","rules"]),n(S,null,{default:c((()=>[h])),_:1}),d(a("div",k,[(v(!0),s(p,null,m(r(j),((e,t)=>(v(),s("div",{class:o([{pt:t%2==0},"msg-item"]),key:t},[a("div",y,[a("div",V,u(e),1)])],2)))),128))],512),[[i,r(j).length]])])}}};export{j as default};
