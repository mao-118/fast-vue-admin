import{s as e,r as t,B as l,c as s,b as a,N as o,t as r,I as u,k as n,l as c,w as d,L as i,G as p,H as x,j as m,n as f,i as v,E as g}from"./index-0409b908.js";const b={class:"app-container"},_=m(" 连接状态： "),k=m("发送"),w=m("聊天记录"),h={class:"msg-box"},y={class:"msg-content"},j={class:"msg-text"},V={setup(m){const V=e([]),q=t(null),B=e({text:""}),C=e({text:[{required:!0,message:"输入的内容不能为空",trigger:"blur"}]}),E=()=>{q.value.validate((e=>{e&&(N(B.text),g.success("发送成功"))}))};let G=null;const H=t(0),I=e([{color:"text-purple-500",text:"建立连接中..."},{color:"text-green-500",text:"连接成功"},{color:"text-red-500",text:"连接失败"},{color:"text-purple-500",text:"连接关闭"}]),L=e=>{H.value=1},N=e=>{G.send(e),V.push(e)},R=e=>{V.push(e.data)},S=e=>{H.value=2,g.error("连接异常，请尝试刷新页面")},U=e=>{H.value=3};return G=new WebSocket("wss://javascript.info/article/websocket/chat/ws"),G.onopen=L,G.onmessage=R,G.onerror=S,G.onclose=U,l((()=>{G.close()})),(e,t)=>{const l=f("el-input"),m=f("el-col"),g=f("el-form-item"),G=f("el-button"),L=f("el-form"),N=f("el-divider");return v(),s("div",b,[a("div",null,[_,a("span",{class:o(r(I)[H.value].color)},u(r(I)[H.value].text),3)]),n(L,{ref_key:"formRef",ref:q,model:r(B),rules:r(C),"label-width":"80px"},{default:c((()=>[n(g,{label:"输入内容",prop:"text"},{default:c((()=>[n(m,{span:5},{default:c((()=>[n(l,{modelValue:r(B).text,"onUpdate:modelValue":t[0]||(t[0]=e=>r(B).text=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(g,null,{default:c((()=>[n(G,{type:"primary",onClick:E},{default:c((()=>[k])),_:1})])),_:1})])),_:1},8,["model","rules"]),n(N,null,{default:c((()=>[w])),_:1}),d(a("div",h,[(v(!0),s(p,null,x(r(V),((e,t)=>(v(),s("div",{class:o([{pt:t%2==0},"msg-item"]),key:t},[a("div",y,[a("div",j,u(e),1)])],2)))),128))],512),[[i,r(V).length]])])}}};export{V as default};
