var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(a,o,t)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t,s=(e,a)=>{for(var o in a||(a={}))n.call(a,o)&&i(e,o,a[o]);if(t)for(var o of t(a))l.call(a,o)&&i(e,o,a[o]);return e};import{W as r,X as p,aB as u,aV as c,aJ as d,$ as v,aW as f,a2 as g,a4 as m,aX as h,aY as A,b as M,a1 as w,aZ as y,Z as b,a_ as k,a$ as I,ag as U,o as L,aq as x,w as S,f as _,g as $,i as P,e as C,aE as O,aa as j,b0 as B,aU as E,a9 as F,q as K,t as T,F as V,b1 as W,ar as R,b2 as J,b3 as Z,m as z,b4 as q,E as G,b5 as H,b6 as D,ab as N,ak as X,af as Y,aw as Q,b7 as ee,_ as ae,r as oe,a5 as te,p as ne,j as le,s as ie,v as se}from"./index-b5c3c419.js";const re=r({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:p(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:p([Function,Array]),default:u},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:c.teleported,highlightFirstItem:{type:Boolean,default:!1}}),pe={[d]:e=>v(e),input:e=>v(e),change:e=>v(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>f(e)},ue=["aria-expanded","aria-owns"],ce={key:0},de=["id","aria-selected","onClick"];var ve;const fe=Q(N(g((ve=s({},{name:"ElAutocomplete",inheritAttrs:!1}),a(ve,o({props:re,emits:pe,setup(e,{expose:a,emit:o}){const t=e,n=m("autocomplete");let l=!1;const i=h(),s=A(),r=M([]),p=M(-1),u=M(""),c=M(!1),v=M(!1),f=M(!1),g=M(),N=M(),Q=M(),ee=M(),ae=w((()=>n.b(String(y())))),oe=w((()=>s.style)),te=w((()=>(b(r.value)&&r.value.length>0||f.value)&&c.value)),ne=w((()=>!t.hideLoading&&f.value)),le=()=>{X((()=>{te.value&&(u.value=`${g.value.$el.offsetWidth}px`)}))},ie=k((async e=>{if(v.value)return;f.value=!0;const a=e=>{f.value=!1,v.value||(b(e)?(r.value=e,p.value=t.highlightFirstItem?0:-1):Y("ElAutocomplete","autocomplete suggestions must be an array"))};if(b(t.fetchSuggestions))a(t.fetchSuggestions);else{const o=await t.fetchSuggestions(e,a);b(o)&&a(o)}}),t.debounce),se=e=>{const a=Boolean(e);if(o("input",e),o(d,e),v.value=!1,c.value||(c.value=l&&a),!t.triggerOnFocus&&!e)return v.value=!0,void(r.value=[]);l&&a&&(l=!1),ie(e)},re=e=>{o("change",e)},pe=e=>{c.value=!0,o("focus",e),t.triggerOnFocus&&ie(String(t.modelValue))},ve=e=>{o("blur",e)},fe=()=>{c.value=!1,l=!0,o(d,""),o("clear")},ge=()=>{te.value&&p.value>=0&&p.value<r.value.length?he(r.value[p.value]):t.selectWhenUnmatched&&(o("select",{value:t.modelValue}),X((()=>{r.value=[],p.value=-1})))},me=()=>{c.value=!1},he=e=>{o("input",e[t.valueKey]),o(d,e[t.valueKey]),o("select",e),X((()=>{r.value=[],p.value=-1}))},Ae=e=>{if(!te.value||f.value)return;if(e<0)return void(p.value=-1);e>=r.value.length&&(e=r.value.length-1);const a=N.value.querySelector(`.${n.be("suggestion","wrap")}`),o=a.querySelectorAll(`.${n.be("suggestion","list")} li`)[e],t=a.scrollTop,{offsetTop:l,scrollHeight:i}=o;l+i>t+a.clientHeight&&(a.scrollTop+=i),l<t&&(a.scrollTop-=i),p.value=e,g.value.ref.setAttribute("aria-activedescendant",`${ae.value}-item-${p.value}`)};return I(ee,me),U((()=>{g.value.ref.setAttribute("role","textbox"),g.value.ref.setAttribute("aria-autocomplete","list"),g.value.ref.setAttribute("aria-controls","id"),g.value.ref.setAttribute("aria-activedescendant",`${ae.value}-item-${p.value}`)})),a({highlightedIndex:p,activated:c,loading:f,inputRef:g,popperRef:Q,suggestions:r,handleSelect:he,handleKeyEnter:ge,focus:()=>{var e;null==(e=g.value)||e.focus()},close:me,highlight:Ae}),(e,a)=>(L(),x(P(D),{ref_key:"popperRef",ref:Q,visible:P(te),"onUpdate:visible":a[2]||(a[2]=e=>H(te)?te.value=e:null),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[P(n).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${P(n).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:le},{content:S((()=>[_("div",{ref_key:"regionRef",ref:N,class:j([P(n).b("suggestion"),P(n).is("loading",P(ne))]),style:R({minWidth:u.value,outline:"none"}),role:"region"},[$(P(W),{id:P(ae),tag:"ul","wrap-class":P(n).be("suggestion","wrap"),"view-class":P(n).be("suggestion","list"),role:"listbox"},{default:S((()=>[P(ne)?(L(),C("li",ce,[$(P(O),{class:j(P(n).is("loading"))},{default:S((()=>[$(P(B))])),_:1},8,["class"])])):(L(!0),C(V,{key:1},E(r.value,((a,o)=>(L(),C("li",{id:`${P(ae)}-item-${o}`,key:o,class:j({highlighted:p.value===o}),role:"option","aria-selected":p.value===o,onClick:e=>he(a)},[F(e.$slots,"default",{item:a},(()=>[K(T(a[e.valueKey]),1)]))],10,de)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:S((()=>[_("div",{ref_key:"listboxRef",ref:ee,class:j([P(n).b(),e.$attrs.class]),style:R(P(oe)),role:"combobox","aria-haspopup":"listbox","aria-expanded":P(te),"aria-owns":P(ae)},[$(P(G),Z({ref_key:"inputRef",ref:g},P(i),{"model-value":e.modelValue,onInput:se,onChange:re,onFocus:pe,onBlur:ve,onClear:fe,onKeydown:[a[0]||(a[0]=z(q((e=>Ae(p.value-1)),["prevent"]),["up"])),a[1]||(a[1]=z(q((e=>Ae(p.value+1)),["prevent"]),["down"])),z(ge,["enter"]),z(me,["tab"])]}),J({_:2},[e.$slots.prepend?{name:"prepend",fn:S((()=>[F(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:S((()=>[F(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:S((()=>[F(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:S((()=>[F(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ue)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}})))),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));var ge={exports:{}},me=ge.exports=function(){function e(e){var t=[];return e.AMapUI&&t.push(a(e.AMapUI)),e.Loca&&t.push(o(e.Loca)),Promise.all(t)}function a(e){return new Promise((function(a,o){var s=[];if(e.plugins)for(var r=0;r<e.plugins.length;r+=1)-1==n.AMapUI.plugins.indexOf(e.plugins[r])&&s.push(e.plugins[r]);if(l.AMapUI===t.failed)o("前次请求 AMapUI 失败");else if(l.AMapUI===t.notload){l.AMapUI=t.loading,n.AMapUI.version=e.version||n.AMapUI.version,r=n.AMapUI.version;var p=document.body||document.head,u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/ui/"+r+"/main.js",u.onerror=function(e){l.AMapUI=t.failed,o("请求 AMapUI 失败")},u.onload=function(){if(l.AMapUI=t.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var t=s[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()}));else for(a();i.AMapUI.length;)i.AMapUI.splice(0,1)[0]()},p.appendChild(u)}else l.AMapUI===t.loaded?e.version&&e.version!==n.AMapUI.version?o("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var t=s[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}a()})):a():e.version&&e.version!==n.AMapUI.version?o("不允许多个版本 AMapUI 混用"):i.AMapUI.push((function(e){e?o(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,o=s.length;e<o;e++){var t=s[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}a()})):a()}))}))}function o(e){return new Promise((function(a,o){if(l.Loca===t.failed)o("前次请求 Loca 失败");else if(l.Loca===t.notload){l.Loca=t.loading,n.Loca.version=e.version||n.Loca.version;var s=n.Loca.version,r=n.AMap.version.startsWith("2"),p=s.startsWith("2");if(r&&!p||!r&&p)o("JSAPI 与 Loca 版本不对应！！");else{r=n.key,p=document.body||document.head;var u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/loca?v="+s+"&key="+r,u.onerror=function(e){l.Loca=t.failed,o("请求 AMapUI 失败")},u.onload=function(){for(l.Loca=t.loaded,a();i.Loca.length;)i.Loca.splice(0,1)[0]()},p.appendChild(u)}}else l.Loca===t.loaded?e.version&&e.version!==n.Loca.version?o("不允许多个版本 Loca 混用"):a():e.version&&e.version!==n.Loca.version?o("不允许多个版本 Loca 混用"):i.Loca.push((function(e){e?o(e):o()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var t;!function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"}(t||(t={}));var n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},i={AMap:[],AMapUI:[],Loca:[]},s=[],r=function(e){"function"==typeof e&&(l.AMap===t.loaded?e(window.AMap):s.push(e))};return{load:function(a){return new Promise((function(o,i){if(l.AMap==t.failed)i("");else if(l.AMap==t.notload){var p=a.key,u=a.version,c=a.plugins;p?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),n.key=p,n.AMap.version=u||n.AMap.version,n.AMap.plugins=c||n.AMap.plugins,l.AMap=t.loading,u=document.body||document.head,window.___onAPILoaded=function(n){if(delete window.___onAPILoaded,n)l.AMap=t.failed,i(n);else for(l.AMap=t.loaded,e(a).then((function(){o(window.AMap)})).catch(i);s.length;)s.splice(0,1)[0]()},(c=document.createElement("script")).type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+n.AMap.version+"&key="+p+"&plugin="+n.AMap.plugins.join(","),c.onerror=function(e){l.AMap=t.failed,i(e)},u.appendChild(c)):i("请填写key")}else if(l.AMap==t.loaded)if(a.key&&a.key!==n.key)i("多个不一致的 key");else if(a.version&&a.version!==n.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(p=[],a.plugins)for(u=0;u<a.plugins.length;u+=1)-1==n.AMap.plugins.indexOf(a.plugins[u])&&p.push(a.plugins[u]);p.length?window.AMap.plugin(p,(function(){e(a).then((function(){o(window.AMap)})).catch(i)})):e(a).then((function(){o(window.AMap)})).catch(i)}else if(a.key&&a.key!==n.key)i("多个不一致的 key");else if(a.version&&a.version!==n.AMap.version)i("不允许多个版本 JSAPI 混用");else{var d=[];if(a.plugins)for(u=0;u<a.plugins.length;u+=1)-1==n.AMap.plugins.indexOf(a.plugins[u])&&d.push(a.plugins[u]);r((function(){d.length?window.AMap.plugin(d,(function(){e(a).then((function(){o(window.AMap)})).catch(i)})):e(a).then((function(){o(window.AMap)})).catch(i)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},i={AMap:[],AMapUI:[],Loca:[]}}}}();const he={class:"app-container"},Ae={class:"search-box"},Me={key:0,class:"zero-item"},we=["title"],ye={class:"name"},be={class:"adress"},ke=(e=>(ne("data-v-665cedb2"),e=e(),le(),e))((()=>_("div",{id:"container"},null,-1)));var Ie=ae({setup(e){const a=M(""),o=M(),t=oe({viewMap:null,marker:null,geocoder:null,geolocation:null}),n=oe({whitesmoke:"amap://styles/macaron",dark:"amap://styles/dark"});te((()=>ie.vueuseColorScheme),(e=>{"dark"===e?t.viewMap.setMapStyle(n.dark):t.viewMap.setMapStyle(n.whitesmoke)}));const l=e=>{i(e.lnglat),r(e.lnglat)},i=e=>{t.marker.setPosition([e.lng,e.lat])},r=e=>{t.geocoder.getAddress([e.lng,e.lat],((e,a)=>{if("complete"===e&&"OK"===a.info&&a&&a.regeocode){const e=a.regeocode.formattedAddress;t.marker.setTitle(e)}}))},p=async(e,a)=>{new AMap.AutoComplete({city:"全国"}).search(e,((e,o)=>{let t=[];"complete"===e&&"OK"===o.info&&(t=o.tips.filter((e=>e.location)).map((e=>s({value:e.name,relAddress:e.district+e.name},e)))),0===t.length&&(t=[{value:"暂未搜索到该地点信息",lengthZero:!0}]),a(t)}))},u=e=>{e.lengthZero?a.value="":(t.viewMap.setZoom(16),t.marker.setPosition(e.location),t.marker.setTitle(e.value),t.viewMap.setCenter(e.location))},c=e=>{i(e.position),r(e.position)},d=e=>{se.error("定位失败")};return U((()=>{window._AMapSecurityConfig={securityJsCode:"e620277d4218a554566dfff84e7eee6e"},me.load({key:"efc9afa4f1d13134f2c302606e766ea0",version:"2.0",plugins:["AMap.Geocoder","AMap.AutoComplete","AMap.Geolocation","AMap.ToolBar"]}).then((e=>{t.viewMap=new e.Map("container",{mapStyle:"dark"===ie.vueuseColorScheme?n.dark:n.whitesmoke,zoom:11,resizeEnable:!0,viewMode:"3D"}),t.marker=new e.Marker({position:[116.397428,39.90923],title:""}),t.geocoder=new e.Geocoder({radius:1e3,extensions:"all"});let a=new e.ToolBar({position:"LB"});t.viewMap.addControl(a),t.geolocation=new e.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new e.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB",showMarker:!1}),t.geolocation.on("complete",c),t.geolocation.on("error",d),t.viewMap.addControl(t.geolocation),t.viewMap.on("click",l),t.viewMap.add(t.marker)}))})),(e,t)=>{const n=fe;return L(),C("div",he,[_("div",Ae,[$(n,{ref_key:"elautocomplete",ref:o,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),"trigger-on-focus":!1,"prefix-icon":"Search",clearable:"",placeholder:"请输入地名关键字","fetch-suggestions":p,onSelect:u},{default:S((({item:e})=>[e.lengthZero?(L(),C("div",Me,T(e.value),1)):(L(),C("div",{key:1,class:"content",title:e.relAddress},[_("div",ye,T(e.name),1),_("div",be,T(e.relAddress),1)],8,we))])),_:1},8,["modelValue"])]),ke])}}},[["__scopeId","data-v-665cedb2"]]);export{Ie as default};
