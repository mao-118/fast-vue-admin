import{s as e,r as l,B as t,c as s,b as a,N as o,t as r,I as n,k as u,l as c,w as d,L as i,G as p,H as x,j as m,n as f,i as v,E as g}from"./index-ee6fe234.js";const b={class:"app-container"},_=m(" 连接状态： "),k=m("发送"),w=m("聊天记录"),h={class:"msg-box"},y={class:"msg-content"},j={class:"msg-text"},V={setup(m){const V=e([]),q=l(null),B=e({text:""}),C=e({text:[{required:!0,message:"输入的内容不能为空",trigger:"blur"}]}),E=()=>{q.value.validate((e=>{e?(N(B.text),g.success("发送成功")):console.log(e)}))};let G=null;const H=l(0),I=e([{color:"text-purple-500",text:"建立连接中..."},{color:"text-green-500",text:"连接成功"},{color:"text-red-500",text:"连接失败"},{color:"text-purple-500",text:"连接关闭"}]),L=e=>{H.value=1},N=e=>{G.send(e),V.push(e)},R=e=>{V.push(e.data)},S=e=>{H.value=2,console.log("error",e),g.error("连接异常，请尝试刷新页面")},U=e=>{H.value=3,console.log("close",e)};return G=new WebSocket("wss://javascript.info/article/websocket/chat/ws"),G.onopen=L,G.onmessage=R,G.onerror=S,G.onclose=U,t((()=>{G.close()})),(e,l)=>{const t=f("el-input"),m=f("el-col"),g=f("el-form-item"),G=f("el-button"),L=f("el-form"),N=f("el-divider");return v(),s("div",b,[a("div",null,[_,a("span",{class:o(r(I)[H.value].color)},n(r(I)[H.value].text),3)]),u(L,{ref_key:"formRef",ref:q,model:r(B),rules:r(C),"label-width":"80px"},{default:c((()=>[u(g,{label:"输入内容",prop:"text"},{default:c((()=>[u(m,{span:5},{default:c((()=>[u(t,{modelValue:r(B).text,"onUpdate:modelValue":l[0]||(l[0]=e=>r(B).text=e)},null,8,["modelValue"])])),_:1})])),_:1}),u(g,null,{default:c((()=>[u(G,{type:"primary",onClick:E},{default:c((()=>[k])),_:1})])),_:1})])),_:1},8,["model","rules"]),u(N,null,{default:c((()=>[w])),_:1}),d(a("div",h,[(v(!0),s(p,null,x(r(V),((e,l)=>(v(),s("div",{key:l,class:o([{pt:l%2==0},"msg-item"])},[a("div",y,[a("div",j,n(e),1)])],2)))),128))],512),[[i,r(V).length]])])}}};export{V as default};
